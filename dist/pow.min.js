/**
 * @license MIT
 * @author IFYates <https://github.com/ifyates/pow.js>
 * @description A very small and lightweight templating framework.
 * @version 3.7.1
 */
var e="apply",r="attributes",t="innerHTML",n="length",a="nextElementSibling",i="outerHTML",o="replace",l="replaceWith",s="pow",f="$data",c="$parent",$="$path",u="$root",p="array",d="data",v="else",m="if",w="ifnot",y="template",g=/{{\s*(.*?)\s*}}/gs,h=(e,r,t)=>e.setAttribute(r,t),b=(e,r)=>e.removeAttribute(r),x=e=>e.cloneNode(1),A=e=>({...e[f],...e,[c]:e[c]&&A(e[c])}),N=(e,r)=>r||!e[o]?e:e[o](/({|p)({|ow)/g,"$1​$2​"),F=e=>"_"+Math.random().toString(36).slice(2),M=(e,r)=>e?.isConnected?e[i]=r:e?.[l](document.createRange().createContextualFragment(r)),O=(e,r)=>(e.content??e).querySelectorAll(r),S=(e,r)=>O(e,"#"+r)[0],W=W=>{var j=W[t],k=[...W[r]],B="$pow"+F(),C={},H=(e,u,j,k)=>{var L=(e,r=A(u))=>{try{return _._eval(e,r)}catch(r){console.warn("Interpolation failed",{[$]:u[$],expr:e},r)}},P=(t,n,i=e[a])=>(!t&&i?.[r].pow&&b(i,v),n|!t&&!M(e,"")),T=(e,r)=>"AsyncFunction"==e?.constructor?.name?e(r):e instanceof Promise?e:0,q=(e,r=F())=>(window[B][r]=r=>e.call(r,A(u)),`${B}.${r}(this)`);for(var E of[...O(e,"*")].filter((e=>e.tagName.startsWith("POW:"))))M(E,E[i][o](/^<pow:([\w-]+)/i,`<${y} ${s} ${y}="$1"`));for(var E of O(e,"*[pow][stop]"))M(E,N(E[i]));b(e,s);let R=0;for(var{name:z,value:D}of[...e[r]]){if(z==v)return M(e,"");if(b(e,z),z==y&&!P(k=S(document,D))){let r={},n=null;for(var E of O(e,y))n??=E[t],r[E.id]=E[t];return n??=e[t],e[t]=k[t][o](/<param(?:\s+id=["']([^"']+)["'])?\s*\/?>/g,((e,t)=>t?r[t]||"":n)),H(e,{...u,$content:r})}if("transform"!=z)if("section"==z&&D){e.id=e.id||F(),u.$section=C[D]=r=>(G.state[f]=r??G.state[f],k=x(G.element),I(k,(r=>{S(W,e.id)[l](k),H(k,G.state,1)})));var G={element:x(e),state:{...u}}}else{var J,K=z==p|z==d|z==m|z==w,Q=":"==z[0],U=":"==z.at(-1),V=K|Q|U;if(g.lastIndex=0,k=D?(k=g.exec(D))?k[0][n]==D[n]?L(k[1]):D[o](g,((e,r)=>L(r)??"")):V?L(D):D:V?u[f]:D,J=T(k,u)){h(e,s);for(var X,Y=e[i],Z=e[a];Z?.[r][s]&&Z[r][v];){if(Y+=Z[i],!Z[r].if&&!Z[r][w]){b(Z,v),Z.id=X=F();break}var ee=Z[a];M(Z,""),Z=ee}return M(e,`<${y} id="${k=F()}"></${y}>`),J.then((e=>{(Z=S(W,k))[t]=Y[o](" ",` ${z}="{{ $async }}" `),H(Z,{...u,$async:e},1),X&&M(S(W,X),"")}))}if(z==p){k=!k|Array.isArray(k)?k:Object.entries(k).map((([e,r])=>({key:e,value:r})));for(let r=0;r<k?.[n];++r){E=x(e);e.parentNode.insertBefore(E,e),H(E,{...u,[$]:`${u[$]}.${D||p}[${r}]`,[f]:k[r],[c]:u,$index:r,$first:!r,$last:r>k[n]-2,$array:k,$prev:r?k[r-1]:"",$next:r<k[n]-1?k[r+1]:""})}return P(k?.[n],1)}if(z==d)return P(null!=k)?0:H(e,{...u,[$]:u[$]+"."+D,[f]:k,[c]:u},j);if(Q)return k&&h(e,z.slice(1),k),H(e,u,j);if(z==m|z==w){if(P(z==m!=!k))return}else U?u={...u,[f]:{...u[f],[z.slice(0,-1)]:k}}:k instanceof Function?h(e,z,q(k)):(k||0===k)&&h(e,z,N(""+k,j))}else R=L(D)}for(;k=O(e,"[pow]:not([pow] [pow])")[0];)H(k,u);R?.call&&R.call(e,e,u),Y=e[t][o](g,((e,r)=>{var t=A(u),n=L(r,t);if(!n)return n??"";if(r=T(n,t)){var a=F();return r.then((e=>M(S(W,a),e))),`<${y} id="${a}"></${y}>`}return n.call?q(n):n})),e[t]=N(Y,j),e.localName==y&&M(e,e[t])},I=(e,r)=>{if(I.$)return console.warn("Binding already in progress");I.$=1;try{r()}finally{e[t]=e[t][o](/​/g,""),delete I.$}return L.sections={...C},L},L={[e]:r=>I(W,(n=>{for(var a of(W[t]=j,k))h(W,a.name,a.value);window[B]={},H(W,{[$]:u,[f]:r,[u]:r},1),L.refresh=t=>L[e](r)})),refresh:e=>{}};return L},_={[e]:(r,t)=>W(r)[e](t),bind:W,_eval:(e,r,t=Object.entries(r).filter((e=>isNaN(e[0]))))=>new Function(...t.map((e=>e[0])),"return "+e).call(r[f],...t.map((e=>e[1])))};export default _;