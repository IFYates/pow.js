/**
 * @license MIT
 * @author IFYates <https://github.com/ifyates/pow.js>
 * @description A very small and lightweight templating framework.
 * @version 1.2.0
 */
function t(t,e=["if","ifnot","item","array","template"]){for(let n of e){let e=t.getAttribute(n);if(null!=e)return t.removeAttribute(n),{attr:n,token:e}}return 0}let e=/\{\{\s*(.*?)\s*\}\}/s;function n(t,n,o){for(;o=e.exec(t);){let a=r(o[1],n)??"";e.lastIndex=o.index+`${a}`.length,t=t.slice(0,o.index)+a+t.slice(o.index+o[0].length)}return t}function r(t,e,n=t){try{let r="*"==t[0]&&(n=t.slice(1))?e:e?.data,o=c._eval(n,r);if("function"==typeof o){let t=`_${Math.random().toString(36).slice(2)}`;return window.$pow$[t]=t=>o.call(t,e.data,e.root),`$pow$.${t}(this)`}return o}catch(n){console.warn("Interpolation failed",{"*path":e.path,token:t},n)}}function o(e,n){if(e?.attributes.pow){let{attr:r,token:o}=t(e,["else-if","else-ifnot","else"]);if(r&&n)return e.remove(),1;r&&"else"!=r&&e.setAttribute(r.slice(5),o)}}let a=t=>(t.content??t).querySelector("*[pow]:not([pow] [pow])"),i=(t,e,n)=>{for(;o(t.nextElementSibling,e););return(n||!e)&&t.remove()};function l(e,o,s){let{attr:c,token:f}=t(e);if("template"==c&&(s=document.getElementById(f))){let t=s.cloneNode(1);return e.parentNode.replaceChild(t,e),l(t,o)}if(s=f?r(f,o):o.data,"if"==c||"ifnot"==c)return i(e,"if"==c!=!s);if("item"==c&&f)o={...o,path:`${o.path}.${f}`,data:s,parent:o.data};else if("array"==c&&"object"==typeof s){s=Array.isArray(s)?s:Object.entries(s).map((([t,e])=>({key:t,value:e})));for(let t=0;t<s.length;++t){let n=e.cloneNode(1);e.parentNode.insertBefore(n,e),l(n,{...o,path:`${o.path}${f?`.${f}`:""}[${t}]`,index:t,first:!t,last:t>s.length-2,data:s[t],parent:o})}return i(e,s.length,1)}for(e.removeAttribute("pow");s=a(e);)l(s,o);for(let{name:t,value:r}of e.attributes)e.setAttribute(t,n(r,o));s=n(e.innerHTML,o),e instanceof HTMLTemplateElement?(e.insertAdjacentHTML("afterend",s),e.remove()):e.innerHTML=s}function s(t){let e=t.innerHTML,n=[...t.attributes],r={apply:o=>{if(r.$pow)return console.warn("Binding already in progress");r.$pow=1,window.$pow$={},t.innerHTML=e;for(let{name:e,value:r}of n)t.setAttribute(e,r);return l(t,{path:"*root",data:o,root:o}),delete r.$pow,r.refresh=()=>r.apply(o),r},refresh:()=>{}};return r}let c={apply:(t,e)=>s(t).apply(e),bind:s,_eval:(t,e)=>(e=Object.entries(e||{}).filter((t=>isNaN(t[0]))),new Function(...e.map((t=>t[0])),`return ${t}`)(...e.map((t=>t[1]))))};export default c;