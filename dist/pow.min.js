/**
 * @license MIT
 * @author IFYates <https://github.com/ifyates/pow.js>
 * @description A very small and lightweight templating framework.
 * @version 3.7.0
 */
var e="attributes",t="innerHTML",r="nextElementSibling",n="outerHTML",a="replace",i="replaceWith",l="pow",o="$data",s="$parent",f="$path",c="$root",$="array",p="data",u="else",d="if",v="ifnot",m="template",g=/{{\s*(.*?)\s*}}/gs,h=(e,t,r)=>e.setAttribute(t,r),w=(e,t)=>e.removeAttribute(t),y=e=>e.cloneNode(1),x=e=>({...e[o],...e,[s]:e[s]&&x(e[s])}),b=(e,t)=>t||!e[a]?e:e[a](/({|p)({|ow)/g,"$1​$2​"),A=e=>"_"+Math.random().toString(36).slice(2),N=(e,t)=>e?.[i](document.createRange().createContextualFragment(t)),F=(e,t)=>(e.content??e).querySelectorAll(t),M=(e,t)=>F(e,"#"+t)[0],O=O=>{var W=O[t],_=[...O[e]],j="$pow"+A(),k={},B=(c,W,_,H)=>{var I=(e,t=x(W))=>{try{return S._eval(e,t)}catch(t){console.warn("Interpolation failed",{[f]:W[f],expr:e},t)}},L=(t,n,a=c[r])=>(!t&&a?.[e].pow&&w(a,u),n|!t&&!N(c,"")),P=(e,t)=>"AsyncFunction"==e?.constructor?.name?e(t):e instanceof Promise?e:0,T=(e,t=A())=>(window[j][t]=t=>e.call(t,x(W)),`${j}.${t}(this)`);for(var q of[...F(c,"*")].filter((e=>e.tagName.startsWith("POW:"))))N(q,q[n][a](/^<pow:([\w-]+)/i,`<${m} ${l} ${m}="$1"`));for(var q of F(c,"*[pow][stop]"))N(q,b(q[n]));w(c,l);let E=0;for(var{name:R,value:z}of[...c[e]]){if(R==u)return N(c,"");if(w(c,R),R==m&&!L(H=M(document,z))){let e={},r=null;for(var q of F(c,m))r??=q[t],e[q.id]=q[t];return r??=c[t],c[t]=H[t][a](/<param(?:\s+id=["']([^"']+)["'])?\s*\/?>/g,((t,n)=>n?e[n]||"":r)),B(c,{...W,$content:e})}if("transform"!=R)if("section"==R&&z){c.id=c.id||A();var D={element:y(c),state:{...W,$section:k[z]}};k[z]=e=>(D.state[o]=e??D.state[o],H=y(D.element),C(H,(e=>{M(O,c.id)[i](H),B(H,D.state,1)})))}else{var G,J=R==$|R==p|R==d|R==v,K=":"==R[0],Q=":"==R.at(-1),U=J|K|Q;if(g.lastIndex=0,H=z?(H=g.exec(z))?H[0].length+H.index==z.length?I(H[1]):z[a](g,((e,t)=>I(t)??"")):U?I(z):z:U?W[o]:z,G=P(H,W)){h(c,l);for(var V,X=c[n],Y=c[r];Y?.[e][l]&&Y[e][u];){if(X+=Y[n],!Y[e].if&&!Y[e][v]){w(Y,u),Y.id=V=A();break}var Z=Y[r];N(Y,""),Y=Z}return N(c,`<${m} id="${H=A()}"></${m}>`),G.then((e=>{(Y=M(O,H))[t]=X,W.$async=e,h(Y.content.firstChild,R,"{{ $async }}"),B(Y,W,1),V&&N(M(O,V),"")}))}if(R==$){H=!H|Array.isArray(H)?H:Object.entries(H).map((([e,t])=>({key:e,value:t})));for(let e=0;e<H?.length;++e){q=y(c);c.parentNode.insertBefore(q,c),B(q,{...W,[f]:`${W[f]}.${z||$}[${e}]`,[o]:H[e],[s]:W,$index:e,$first:!e,$last:e>H.length-2,$array:H,$prev:e?H[e-1]:"",$next:e<H.length-1?H[e+1]:""})}return L(H?.length,1)}if(R==p)return L(null!=H)?0:B(c,{...W,[f]:W[f]+"."+z,[o]:H,[s]:W},_);if(K)return H&&h(c,R.slice(1),H),B(c,W,_);if(R==d|R==v){if(L(R==d!=!H))return}else Q?W={...W,[o]:{...W[o],[R.slice(0,-1)]:H}}:H instanceof Function?h(c,R,T(H)):(H||0===H)&&h(c,R,b(""+H,_))}else E=I(z)}for(;H=F(c,"[pow]:not([pow] [pow])")[0];)B(H,W);E?.call&&E.call(c,c,W),X=c[t][a](g,((e,t)=>{var r=x(W),n=I(t,r);if(!n)return n??"";if(t=P(n,r)){var a=A();return t.then((e=>N(M(O,a),e))),`<${m} id="${a}"></${m}>`}return n.call?T(n):n})),c[t]=b(X,_),c.localName==m&&N(c,c[t])},C=(e,r)=>{if(C.$)return console.warn("Binding already in progress");C.$=1;try{r()}finally{e[t]=e[t][a](/​/g,""),delete C.$}return H.sections={...k},H},H={apply:e=>C(O,(r=>{for(var n of(O[t]=W,_))h(O,n.name,n.value);window[j]={},B(O,{[f]:c,[o]:e,[c]:e},1),H.refresh=t=>H.apply(e)})),refresh:e=>{}};return H},S={apply:(e,t)=>O(e).apply(t),bind:O,_eval:(e,t,r=Object.entries(t).filter((e=>isNaN(e[0]))))=>new Function(...r.map((e=>e[0])),"return "+e).call(t[o],...r.map((e=>e[1])))};export default S;