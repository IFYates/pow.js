/**
 * @license MIT
 * @author IFYates <https://github.com/ifyates/pow.js>
 * @description A very small and lightweight templating framework.
 * @version 1.4.0
 */
function e(e,t=["if","ifnot","item","array","template"]){for(let n of t){let t=e.getAttribute(n);if(null!=t)return e.removeAttribute(n),{attr:n,expr:t}}return 0}let t=/\{\{\s*(.*?)\s*\}\}/s;function n(e,n,o){for(;o=t.exec(e);){let a=r(o[1],n)??"";t.lastIndex=o.index+`${a}`.length,e=e.slice(0,o.index)+a+e.slice(o.index+o[0].length)}return e}function r(e,t,n=e){try{let r="*"==e[0]&&(n=e.slice(1))?t:t?.data,o=c._eval(n,r);if("function"==typeof o){let e=`_${Math.random().toString(36).slice(2)}`;return window.$pow$[e]=e=>o.call(e,t.data,t.root),`$pow$.${e}(this)`}return o}catch(n){console.warn("Interpolation failed",{"*path":t.path,expr:e},n)}}function o(t,n){if(t?.attributes.pow){let{attr:r,expr:o}=e(t,["else-if","else-ifnot","else"]);if(r&&n)return!t.remove();r&&"else"!=r&&t.setAttribute(r.slice(5),o)}}let a=e=>(e.content??e).querySelector("*[pow]:not([pow] [pow])"),i=(e,t,n)=>{for(;o(e.nextElementSibling,t););return(n||!t)&&e.remove()};function l(t,o,s){let{attr:c,expr:p}=e(t);if("template"==c&&(s=document.getElementById(p))){let e=s.cloneNode(1);return t.parentNode.replaceChild(e,t),l(e,o)}if(s=p?r(p,o):o.data,"if"==c||"ifnot"==c)return i(t,"if"==c!=!s);if("item"==c&&p){if(null==s)return t.remove();o={...o,path:`${o.path}.${p}`,data:s,parent:o.data}}else if("array"==c){s=!s||Array.isArray(s)?s:Object.entries(s).map((([e,t])=>({key:e,value:t})));for(let e=0;e<s?.length;++e){let n=t.cloneNode(1);t.parentNode.insertBefore(n,t),l(n,{...o,path:`${o.path}${p?`.${p}`:""}[${e}]`,index:e,first:!e,last:e>s.length-2,data:s[e],parent:o})}return i(t,s?.length,1)}for(t.removeAttribute("pow");s=a(t);)l(s,o);for(let{name:e,value:r}of t.attributes)t.setAttribute(e,n(r,o));s=n(t.innerHTML,o),t instanceof HTMLTemplateElement?(t.insertAdjacentHTML("afterend",s),t.remove()):t.innerHTML=s}function s(e){let t=e.innerHTML,n=[...e.attributes],r={apply:o=>r.$pow?console.warn("Binding already in progress"):(r.$pow=1,window.$pow$={},e.innerHTML=t,n.forEach((t=>e.setAttribute(t.name,t.value))),l(e,{path:"*root",data:o,root:o}),delete r.$pow,r.refresh=()=>r.apply(o),r),refresh:()=>{}};return r}let c={apply:(e,t)=>s(e).apply(t),bind:s,_eval:(e,t,n)=>(n=Object.entries(t||{}).filter((e=>isNaN(e[0]))),new Function(...n.map((e=>e[0])),`return ${e}`).call(t,...n.map((e=>e[1]))))};export default c;