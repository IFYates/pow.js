/**
 * @license MIT
 * @author IFYates <https://github.com/ifyates/pow.js>
 * @description A very small and lightweight templating framework.
 * @version 3.7.0
 */
var e="attributes",t="innerHTML",r="nextElementSibling",n="outerHTML",a="replace",i="replaceWith",l="pow",o="$data",s="$parent",f="$path",c="$root",$="array",p="data",u="else",d="if",v="ifnot",m="template",g=/{{\s*(.*?)\s*}}/gs,w=(e,t,r)=>e.setAttribute(t,r),y=(e,t)=>e.removeAttribute(t),h=e=>e.cloneNode(1),b=e=>({...e[o],...e,[s]:e[s]&&b(e[s])}),x=(e,t)=>t||!e[a]?e:e[a](/({|p)({|ow)/g,"$1​$2​"),A=e=>"_"+Math.random().toString(36).slice(2),N=(e,t)=>e?.[i](document.createRange().createContextualFragment(t)),F=(e,t)=>(e.content??e).querySelectorAll(t),M=(e,t)=>F(e,"#"+t)[0],O=O=>{var W=O[t],_=[...O[e]],j="$pow"+A(),k={},B=(c,W,_,I)=>{var L=(e,t=b(W))=>{try{return S._eval(e,t)}catch(t){console.warn("Interpolation failed",{[f]:W[f],expr:e},t)}},P=(t,n,a=c[r])=>(!t&&a?.[e].pow&&y(a,u),n|!t&&!N(c,"")),T=(e,t)=>"AsyncFunction"==e?.constructor?.name?e(t):e instanceof Promise?e:0,q=(e,t=A())=>(window[j][t]=t=>e.call(t,b(W)),`${j}.${t}(this)`);for(var C of[...F(c,"*")].filter((e=>e.tagName.startsWith("POW:"))))N(C,C[n][a](/^<pow:([\w-]+)/i,`<${m} ${l} ${m}="$1"`));for(var C of F(c,"*[pow][stop]"))N(C,x(C[n]));y(c,l);let E=0;for(var{name:R,value:z}of[...c[e]]){if(R==u)return N(c,"");if(y(c,R),R==m&&!P(I=M(document,z))){let e={},r=null;for(var C of F(c,m))r??=C[t],e[C.id]=C[t];return r??=c[t],c[t]=I[t][a](/<param(?:\s+id=["']([^"']+)["'])?\s*\/?>/g,((t,n)=>n?e[n]||"":r)),B(c,{...W,$content:e})}if("transform"!=R)if("section"==R&&z){c.id=c.id||A(),W.$section=k[z]=e=>(D.state[o]=e??D.state[o],I=h(D.element),H(I,(e=>{M(O,c.id)[i](I),B(I,D.state,1)})));var D={element:h(c),state:{...W}}}else{var G,J=R==$|R==p|R==d|R==v,K=":"==R[0],Q=":"==R.at(-1),U=J|K|Q;if(g.lastIndex=0,I=z?(I=g.exec(z))?I[0].length==z.length?L(I[1]):z[a](g,((e,t)=>L(t)??"")):U?L(z):z:U?W[o]:z,G=T(I,W)){w(c,l);for(var V,X=c[n],Y=c[r];Y?.[e][l]&&Y[e][u];){if(X+=Y[n],!Y[e].if&&!Y[e][v]){y(Y,u),Y.id=V=A();break}var Z=Y[r];N(Y,""),Y=Z}return N(c,`<${m} id="${I=A()}"></${m}>`),G.then((e=>{(Y=M(O,I))[t]=X[a](" ",` ${R}="{{ $async }}" `),B(Y,{...W,$async:e},1),V&&N(M(O,V),"")}))}if(R==$){I=!I|Array.isArray(I)?I:Object.entries(I).map((([e,t])=>({key:e,value:t})));for(let e=0;e<I?.length;++e){C=h(c);c.parentNode.insertBefore(C,c),B(C,{...W,[f]:`${W[f]}.${z||$}[${e}]`,[o]:I[e],[s]:W,$index:e,$first:!e,$last:e>I.length-2,$array:I,$prev:e?I[e-1]:"",$next:e<I.length-1?I[e+1]:""})}return P(I?.length,1)}if(R==p)return P(null!=I)?0:B(c,{...W,[f]:W[f]+"."+z,[o]:I,[s]:W},_);if(K)return I&&w(c,R.slice(1),I),B(c,W,_);if(R==d|R==v){if(P(R==d!=!I))return}else Q?W={...W,[o]:{...W[o],[R.slice(0,-1)]:I}}:I instanceof Function?w(c,R,q(I)):(I||0===I)&&w(c,R,x(""+I,_))}else E=L(z)}for(;I=F(c,"[pow]:not([pow] [pow])")[0];)B(I,W);E?.call&&E.call(c,c,W),X=c[t][a](g,((e,t)=>{var r=b(W),n=L(t,r);if(!n)return n??"";if(t=T(n,r)){var a=A();return t.then((e=>N(M(O,a),e))),`<${m} id="${a}"></${m}>`}return n.call?q(n):n})),c[t]=x(X,_),c.localName==m&&N(c,c[t])},H=(e,r)=>{if(H.$)return console.warn("Binding already in progress");H.$=1;try{r()}finally{e[t]=e[t][a](/​/g,""),delete H.$}return I.sections={...k},I},I={apply:e=>H(O,(r=>{for(var n of(O[t]=W,_))w(O,n.name,n.value);window[j]={},B(O,{[f]:c,[o]:e,[c]:e},1),I.refresh=t=>I.apply(e)})),refresh:e=>{}};return I},S={apply:(e,t)=>O(e).apply(t),bind:O,_eval:(e,t,r=Object.entries(t).filter((e=>isNaN(e[0]))))=>new Function(...r.map((e=>e[0])),"return "+e).call(t[o],...r.map((e=>e[1])))};export default S;