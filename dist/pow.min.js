/**
 * @license MIT
 * @author IFYates <https://github.com/ifyates/pow.js>
 * @description A very small and lightweight templating framework.
 * @version 1.2.0
 */
function t(t,e=["item","array","if","ifnot"]){for(let n of e){let e=t.getAttribute(n);if(null!=e)return t.removeAttribute(n),{attr:n,token:e}}return 0}let e=/\{\{\s*(.*?)\s*\}\}/s;function n(t,n,o){for(;o=e.exec(t);){let a=r(o[1],n)??"";e.lastIndex=o.index+`${a}`.length,t=t.slice(0,o.index)+a+t.slice(o.index+o[0].length)}return t}function r(t,e,n=t){try{let r="*"==t[0]&&(n=t.slice(1))?e:e?.data,o=c._eval(n,r);if("function"==typeof o){let t=`_${Math.random().toString(36).slice(2)}`;return window.$pow$[t]=t=>o.call(t,e.data,e.root),`$pow$.${t}(this)`}return o}catch(n){console.warn("Interpolation failed",{"*path":e.path,token:t},n)}}function o(e,n){if(e?.attributes.pow){let{attr:r,token:o}=t(e,["else-if","else-ifnot","else"]);if(r&&n)return e.remove(),1;r&&"else"!=r&&e.setAttribute(r.slice(5),o)}}let a=t=>(t.content??t).querySelector("*[pow]:not([pow] [pow])"),i=(t,e,n)=>{for(;o(t.nextElementSibling,e););return(n||!e)&&t.remove()};function s(e,o){let{attr:l,token:c}=t(e),f=c?r(c,o):o.data;if("if"==l||"ifnot"==l)return i(e,"if"==l!=!f);if("item"==l&&c)o={...o,path:`${o.path}.${c}`,data:f,parent:o.data};else if("array"==l&&"object"==typeof f){let t=Array.isArray(f)?f:Object.entries(f).map((([t,e])=>({key:t,value:e})));for(let n=0;n<t.length;++n){let r=e.cloneNode(1);e.parentNode.insertBefore(r,e),s(r,{...o,path:`${o.path}${c?`.${c}`:""}[${n}]`,index:n,first:!n,last:n>t.length-2,data:t[n],parent:o})}return i(e,t.length,1)}var p;for(e.removeAttribute("pow");p=a(e);)s(p,o);for(let{name:t,value:r}of e.attributes)e.setAttribute(t,n(r,o));let u=n(e.innerHTML,o);e instanceof HTMLTemplateElement?(e.insertAdjacentHTML("afterend",u),e.remove()):e.innerHTML=u}function l(t){let e=t.innerHTML,n=[...t.attributes],r={apply:o=>{if(r.$pow)return console.warn("Binding already in progress");r.$pow=1,window.$pow$={},t.innerHTML=e;for(let{name:e,value:r}of n)t.setAttribute(e,r);return s(t,{path:"*root",data:o,root:o}),delete r.$pow,r.refresh=()=>r.apply(o),r},refresh:()=>{}};return r}let c={apply:(t,e)=>l(t).apply(e),bind:l,_eval:(t,e)=>(e=Object.entries(e||{}).filter((t=>isNaN(t[0]))),new Function(...e.map((t=>t[0])),`return ${t}`)(...e.map((t=>t[1]))))};export default c;