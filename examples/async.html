<!DOCTYPE html>
<html>

<head>
    <script>
        window.fn = async (val, delay = 2000) => new Promise((resolve) => {
            setTimeout(() => resolve(val), delay);
        })
    </script>
    <script type="module">
        import pow from '../src/pow.js'

        const fn = new Promise((resolve) => {
            resolve([1, 2, 3])
        })
        pow.apply(document.body, { fn })

        var t = document.getElementById('x')
        console.log(t, document.createRange().createContextualFragment(t.innerHTML), document.createRange().createContextualFragment(t.innerHTML).childNodes)
        t.outerHTML = t.innerHTML
    </script>
</head>

<body>
    <table border="1">
        <tbody>
            <tr pow array="{{ fn }}">
                <td>{{ $data }}</td>
            </tr>
            <template id="x"><tr><td>test</td><td>test</td><td>test</td></tr></template>
        </tbody>
    </table>
</body>

</html>