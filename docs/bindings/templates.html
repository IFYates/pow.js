<h1 class="text-2xl font-bold">Bindings / Template</h1>

<template pow template="version-list" data="[ 1.2, 1.4, '2.0' ]"></template>

<h2 class="mt-3 text-xl font-bold text-gray-600"><code class="html"><code class="attr">template</code>="<code
        class="value">id</code>"</code></h2>

<template pow if="version(1.2, 2.0)">
    <p class="mt-2 text-gray-600">
        The <code class="attr">template</code> binding will replace the element with the contents of the specified
        template, allowing you to reuse structures.
    </p>
    <pre class="html">
    &lt;!-- For { text: 'Hello, world!' } -->
    &lt;div <span class="pow">pow</span> <span class="attr">template</span>="<span class="value">my-component</span>">&lt;/div>
    &lt;template id="my-component">
        <span pow stop>{{ text }}</span>
    &lt;/template>

    &lt;!-- Result -->
    Hello, world! (TODO: confirm)
    &lt;template id="my-component">
        <span pow stop>{{ text }}</span>
    &lt;/template>
</pre>
</template>

<template pow if="version(2.0)">
    <p class="mt-2 text-gray-600">
        The <code class="attr">template</code> binding will replace the contents of the bound element with the contents
        of the
        specified template, allowing you to reuse structures.
    </p>
    <pre class="html">
    &lt;!-- For { text: 'Hello, world!' } -->
    &lt;div <span class="pow">pow</span> <span class="attr">template</span>="<span class="value">my-component</span>">&lt;/div>
    &lt;template id="my-component">
        <span pow stop>{{ text }}</span>
    &lt;/template>

    &lt;!-- Result -->
    &lt;div>
        Hello, world!
    &lt;/div>
    &lt;template id="my-component">
        <span pow stop>{{ text }}</span>
    &lt;/template>
</pre>

    <p class="mt-2 text-gray-600">
        If there is no element matching the <span class="value">id</span>, the
        existing contents will be processed without modification.
    </p>
    TODO: check if 1.2/1.4 behave like this
    <pre class="html">
    &lt;!-- For { text: 'Hello, world!' } -->
    &lt;div <span class="pow">pow</span> <span class="attr">template</span>="<span class="value">missing-component</span>">
        <span pow stop>{{ text }}</span>
    &lt;/div>

    &lt;!-- Result -->
    &lt;div>
        Hello, world!
    &lt;/div>
</pre>

    <p class="mt-2 text-gray-600">
        As with any other <a href="?/syntax-binding/#templates">binding</a>, if the bound element is a <code
            class="html">template</code>, the entire element is replaced.
    </p>
</template>

<p class="mt-2 text-gray-600">
    The <code class="value">id</code> will be used before <a href="?/syntax-expressions/">expressions</a> are
    interpolated, so it is not possible to use an expression to dynamically select a template.
</p>

<p class="mt-2 text-gray-600">
    Note: Reusable templates should always be stored outside of any bound elements, otherwise they will be modified like
    anything else.
</p>

<template pow if="version(1.4, 2.0)">
    <h2 class="mt-3 text-xl font-bold text-gray-600">Dynamic <code
            class="html"><code class="attr">:template</code>="<code class="expr">expression</code>"</code></h2>

    <p class="mt-2 text-gray-600">
        Although <span pow template="version" data="1.4"></span> introduced <a
            href="?/syntax-attributes/#interpolated">interpolated attributes</a>, they were evaluated after the
        template and so can not be used to modify bindings.
    </p>
    <pre class="html">
    &lt;!-- For { value: 1 } -->
    &lt;div <span class="pow">pow</span> <span class="attr">:template</span>="<span class="expr">'case-' + value</span>">
        Unmatched
    &lt;/div>
    &lt;template id="case-1">One&lt;/template>
    &lt;template id="case-2">Two&lt;/template>
    &lt;template id="case-3">Three&lt;/template>

    &lt;!-- Result -->
    &lt;div template="case-1">
        Unmatched
    &lt;/div>
</pre>
</template>

<template pow if="version(2.0)">
    <h2 class="mt-3 text-xl font-bold text-gray-600">Dynamic <code
            class="html"><code class="attr">:template</code>="<code class="expr">expression</code>"</code></h2>

    <p class="mt-2 text-gray-600">
        Although <span pow template="version" data="1.4"></span> introduced <a
            href="?/syntax-attributes/#interpolated">interpolated attributes</a>, they were evaluated after the
        template
        prior to <span pow template="version" data="'2.0'"></span> and so could not be used to modify
        bindings.<br />
        Now that the processing order has changed, an interpolated <code class="attr">:template</code> attribute can
        be used to dynamically select the target template, which gives a convenient structure for simulating a
        switch statement.
    </p>
    <pre class="html">
    &lt;!-- For { value: 1 } -->
    &lt;div <span class="pow">pow</span> <span class="attr">:template</span>="<span class="expr">'case-' + value</span>">
        Unmatched
    &lt;/div>
    &lt;template id="case-1">One&lt;/template>
    &lt;template id="case-2">Two&lt;/template>
    &lt;template id="case-3">Three&lt;/template>

    &lt;!-- Result -->
    &lt;div>
        One
    &lt;/div>
</pre>
</template>

<h2 class="mt-3 text-xl font-bold text-gray-600">Template configuration</h2>
<p class="mt-2 text-gray-600">
    A useful way to bind a template and add additional configuration is to use <code
        class="attr">{{ version(2.0) ? 'data' : 'item' }}</code> with an expanded object.
</p>
<pre class="html">
    &lt;!-- For { text: 'Hello, world!' } -->
    &lt;template <span class="pow">pow</span> <span class="attr">template</span>="<span class="value">my-component</span>" <span class="attr">{{ version(2.0) ? 'data' : 'item' }}</span>="<span pow stop class="expr">{{ ...$data, color: 'red' }}</span>">&lt;/template>
    &lt;template id="my-component">
        <span pow stop>&lt;div style="color: {{ color }}">{{ text }}&lt;/div></span>
    &lt;/template>

    &lt;!-- Result -->
    &lt;div style="color: red">Hello, world!&lt;/div>
</pre>

Order of attributes (if, item, loop) and template
Bind on static object { ... }